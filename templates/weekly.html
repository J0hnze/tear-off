{% extends "base.html" %}
{% block content %}

<h1>
  This Week
  <span class="muted">
    ({{ start_of_week }} ‚Üí {{ end_of_week }})
  </span>
</h1>

<form method="POST" action="/print/weekly" style="margin-bottom: 1rem;">
  <button type="submit" class="btn btn-primary" style="background: #4CAF50; padding: 0.75rem 1.5rem;">
    üñ®Ô∏è Print All
  </button>
</form>

<!-- ========================= -->
<!-- Tasks with dates -->
<!-- ========================= -->
<section class="section">
  <h2>Scheduled</h2>

  {% if week_tasks %}
    {% for t in week_tasks %}
      <div class="card task-card">
        <div class="task-main">
          <div class="task-title">
            {{ t["title"] }}
          </div>

          {% if t["notes"] %}
            <div class="task-notes">
              {{ t["notes"] }}
            </div>
          {% endif %}
        </div>

        <div class="task-meta">
          <span class="priority">P{{ t["priority"] }}</span>

          <span class="due">
            {{ t["due_at"][:10] }}
          </span>

          {% if t["tags"] %}
            <span class="tags">{{ t["tags"] }}</span>
          {% endif %}
        </div>

        <form method="POST" action="/done/{{ t['id'] }}">
          <button class="btn btn-success" type="submit">
            ‚úì Mark done
          </button>
        </form>
      </div>
    {% endfor %}
  {% else %}
    <div class="empty">
      No scheduled tasks this week üéâ
    </div>
  {% endif %}
</section>

<!-- ========================= -->
<!-- No date tasks -->
<!-- ========================= -->
<section class="section">
  <h2>No Date</h2>

  {% if no_date_tasks %}
    {% for t in no_date_tasks %}
      <div class="card task-card muted">
        <div class="task-main">
          <div class="task-title">
            {{ t["title"] }}
          </div>
        </div>

        <div class="task-meta">
          <span class="priority">P{{ t["priority"] }}</span>

          {% if t["tags"] %}
            <span class="tags">{{ t["tags"] }}</span>
          {% endif %}
        </div>

        <form method="POST" action="/done/{{ t['id'] }}">
          <button class="btn" type="submit">
            ‚úì Mark done
          </button>
        </form>
      </div>
    {% endfor %}
  {% else %}
    <div class="empty">
      No floating tasks
    </div>
  {% endif %}
</section>

{% endblock %}
